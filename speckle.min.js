(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Speckle=f()}})(function(){var define,module,exports;return function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e}()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Speckle=function(){function Speckle(element,options){_classCallCheck(this,Speckle);this.instance=Speckle.instance;Speckle.instance++;if(!element||!(element instanceof Element)){this.throwElementError()}this.element=element;this.defaultOptions={quantity:56,minSize:4,maxSize:56,tbOffset:8,lrOffset:8,minOpacity:12.5,maxOpacity:87.5,isBokeh:false,color:"",zIndex:0,isCropped:false,tagName:"I",attributes:null};this.options=this.parseOptions(options,this.defaultOptions);var _options=this.options,minSize=_options.minSize,maxSize=_options.maxSize,tbOffset=_options.tbOffset,lrOffset=_options.lrOffset,minOpacity=_options.minOpacity,maxOpacity=_options.maxOpacity;if(minSize<1||minSize>maxSize){this.throwOptionsError("minSize")}if(maxSize<1||maxSize<minSize){this.throwOptionsError("maxSize")}if(tbOffset<0){this.throwOptionsError("tbOffset")}if(lrOffset<0){this.throwOptionsError("lrOffset")}if(minOpacity<0||minOpacity>100||minOpacity>maxOpacity){this.throwOptionsError("minOpacity")}if(maxOpacity<0||maxOpacity>100||maxOpacity<minOpacity){this.throwOptionsError("maxOpacity")}this.globalStyles={borderRadius:"50%",display:"block",pointerEvents:"none",position:"absolute"};this.upgradedClass="speckle--upgraded";this.render()}_createClass(Speckle,[{key:"parseOptions",value:function parseOptions(options,defaultOptions){if(!options||(typeof options==="undefined"?"undefined":_typeof(options))!=="object"){return defaultOptions}var parsedOptions={};for(var key in defaultOptions){var value=options[key];if(typeof value==="number"){parsedOptions[key]=value}else{parsedOptions[key]=value||defaultOptions[key]}}return parsedOptions}},{key:"throwElementError",value:function throwElementError(){throw new Error("Speckle.js\n"+"A valid HTML Element must be passed to the constructor as the first argument.")}},{key:"throwOptionsError",value:function throwOptionsError(key){var message="";if(key==="minSize"){message="The value must be greater than or equal to 1, and less than `maxSize`."}else if(key==="maxSize"){message="The value must be greater than or equal to 1, and greater than `minSize`."}else if(key==="tbOffset"){message="The value must be greater than 0."}else if(key==="lrOffset"){message="The value must be greater than 0."}else if(key==="minOpacity"){message="The value must be between 1 and 100, and less than `maxOpacity`."}else if(key==="maxOpacity"){message="The value must be between 1 and 100, and greater than `minOpacity`."}throw new Error("Speckle.js ["+key+"]\n"+message)}},{key:"getRandomInt",value:function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1)+min)}},{key:"getRandomHex",value:function getRandomHex(){return"#"+("000000"+Math.random().toString(16).slice(2,8)).slice(-6).toUpperCase()}},{key:"getStyles",value:function getStyles(){var globalStyles=this.globalStyles,options=this.options;var minSize=options.minSize,maxSize=options.maxSize,tbOffset=options.tbOffset,lrOffset=options.lrOffset,minOpacity=options.minOpacity,maxOpacity=options.maxOpacity,color=options.color,isBokeh=options.isBokeh,zIndex=options.zIndex;var size=this.getRandomInt(minSize,maxSize);var center=size/2;var renderColor=color||this.getRandomHex();return Object.assign(globalStyles,{backgroundColor:renderColor,boxShadow:isBokeh?"0 0 "+size/3+"px "+size/3+"px "+renderColor:"",height:size+"px",left:"calc("+this.getRandomInt(0-lrOffset,100+lrOffset)+"% - "+center+"px)",opacity:this.getRandomInt(minOpacity,maxOpacity)*.01,top:"calc("+this.getRandomInt(0-tbOffset,100+tbOffset)+"% - "+center+"px)",width:size+"px",zIndex:zIndex})}},{key:"destroy",value:function destroy(){var element=this.element,instance=this.instance,upgradedClass=this.upgradedClass;var speckles=element.querySelectorAll('[data-speckle-group="'+instance+'"]');if(speckles&&speckles.length>0){speckles.forEach(function(speckle,i){element.removeChild(speckle)})}var groups=element.getAttribute("data-speckle-groups")||"";var cleanElement=false;if(groups){var newGroups=groups.split(",");newGroups.splice(newGroups.indexOf(instance.toString()),1);if(newGroups.length>0){element.setAttribute("data-speckle-groups",newGroups.join(","))}else{element.removeAttribute("data-speckle-groups");cleanElement=true}}if(cleanElement){var positionMod=element.getAttribute("data-speckle-position-mod");if(positionMod){element.style.position=positionMod==="true"?null:positionMod;element.removeAttribute("data-speckle-position-mod")}element.classList.remove(upgradedClass);var overflowMod=element.getAttribute("data-speckle-overflow-mod");if(overflowMod){element.style.overflow=overflowMod==="true"?null:overflowMod;element.removeAttribute("data-speckle-overflow-mod")}}}},{key:"rerender",value:function rerender(){this.destroy();this.render()}},{key:"render",value:function render(){var element=this.element,instance=this.instance,options=this.options,upgradedClass=this.upgradedClass;var quantity=options.quantity,isCropped=options.isCropped,tagName=options.tagName,attributes=options.attributes;var _window$getComputedSt=window.getComputedStyle(element),position=_window$getComputedSt.position,overflow=_window$getComputedSt.overflow;var isUpgraded=element.classList.contains(upgradedClass);var oldGroups=element.getAttribute("data-speckle-groups")||"";var newGroups=oldGroups?[oldGroups,instance].join(","):instance;element.setAttribute("data-speckle-groups",newGroups);if(!isUpgraded&&["relative, absolute, fixed"].indexOf(position)===-1){element.setAttribute("data-speckle-position-mod",element.style.position||true);element.style.position="relative"}if(!isUpgraded&&isCropped&&["hidden"].indexOf(overflow)===-1){element.setAttribute("data-speckle-overflow-mod",element.style.overflow||true);element.style.overflow="hidden"}for(var i=1;i<=quantity;i++){var speckle=document.createElement(tagName);speckle.setAttribute("data-speckle-index",i);speckle.setAttribute("data-speckle-group",instance);var styles=this.getStyles();if(styles&&(typeof styles==="undefined"?"undefined":_typeof(styles))==="object"){for(var styleKey in styles){speckle.style[styleKey]=styles[styleKey]}}if(attributes&&(typeof attributes==="undefined"?"undefined":_typeof(attributes))==="object"){for(var attributeKey in attributes){speckle.setAttribute(attributeKey,attributes[attributeKey])}}element.appendChild(speckle)}if(!isUpgraded){element.classList.add(upgradedClass)}}}]);return Speckle}();Speckle.instance=1;exports.default=Speckle;module.exports=exports["default"]},{}]},{},[1])(1)});